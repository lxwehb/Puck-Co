<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Books • Puck&Co.</title>
    <link rel="icon" href="assets/img/puck&co_favicon.png">
<link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container header-container">
            <a href="index.html" class="logo">
                <img src="assets/img/puck&co.png" class="responsive-img" alt="Puck&Co." />
            </a>
            <nav class="nav" aria-label="Main navigation">
                <a href="index.html">Home</a>
                <a href="books.html">Books</a>
                <a href="resources.html">Free Resources</a>
                <a href="index.html#contatti">Contact</a>
            </nav>
        </div>
    </header>

    <script>
    (function(){
      function setActiveNav(){
        var navLinks = document.querySelectorAll('.nav a');
        var path = window.location.pathname.split('/').pop() || 'index.html';
        var hash = window.location.hash || '';
        navLinks.forEach(function(link){
          var href = link.getAttribute('href') || '';
          var parts = href.split('#');
          var hrefFile = parts[0] || 'index.html';
          var hrefHash = parts[1] ? ('#' + parts[1]) : '';
          if(hrefFile === path){
            if(hrefHash){
              if(hrefHash === hash) link.setAttribute('aria-current','page'); else link.removeAttribute('aria-current');
            } else {
              link.setAttribute('aria-current','page');
            }
          } else {
            link.removeAttribute('aria-current');
          }
        });
      }
      document.addEventListener('DOMContentLoaded', setActiveNav);
    })();
    </script>

    <main>
        <section class="books-page">
            <div class="container">
                <h1 class="section-title" style="font-family:'Fredoka',sans-serif; text-align:center; margin-bottom:2.5rem; color:var(--dark-text);">Our Books</h1>
                
                <div class="books-layout">
                    <!-- Colonna sinistra: Libro in evidenza + Categorie -->
                    <aside class="categories-sidebar">
                        <!-- Libro in evidenza -->
                        <div class="featured-book" style="margin-bottom: 2rem; background: var(--ice-gray); border-radius: 1.25rem; padding: 1.5rem; text-align: center; box-shadow: 0 4px 12px rgba(49,130,188,0.1);">
                            <div style="font-family:'Fredoka',sans-serif; font-size:1.1rem; color:var(--primary-blue); margin-bottom:0.75rem;">Featured Book</div>
                            <img src="" alt="" class="featured-cover" style="max-width: 160px; width: 100%; margin: 0 auto 1rem; border-radius: 0.5rem; box-shadow: 0 6px 16px rgba(0,0,0,0.1);">
                            <h3 class="featured-title" style="font-family:'Fredoka',sans-serif; font-size:1.25rem; margin-bottom:1.2rem; color:var(--dark-text);"></h3>
                            <button class="btn btn-secondary featured-detail-btn" style="margin-top:0.5rem; font-size:0.95rem; padding:0.5rem 1rem;">Detail</button>
                        </div>

                        <!-- Categorie con 4 livelli -->
                        <div class="category-item" data-category="format">
                            <div class="category-header">By Format</div>
                            <ul class="subcategories">
                                <li><a href="#" class="subcategory-link" data-filter="format-illustrated">Illustrated Books</a></li>
                                <li>
                                    <div class="subcategory-header">
                                        Activity Books
                                        <span class="submenu-toggle">▶</span>
                                    </div>
                                    <ul class="sub-subcategories">
                                        <li>
                                            <div class="sub-sub-header">
                                                Puzzle & Games
                                                <span class="submenu-toggle">▶</span>
                                            </div>
                                            <ul class="sub-sub-subcategories">
                                                <li>
                                                    <div class="sub-sub-header">
                                                        Crosswords
                                                        <span class="submenu-toggle">▶</span>
                                                    </div>
                                                    <ul class="sub-sub-sub-subcategories">
                                                        <li><a href="#" class="sub-sub-sub-link" data-filter="crosswords-easy">Easy</a></li>
                                                        <li><a href="#" class="sub-sub-sub-link" data-filter="crosswords-advanced">Advanced</a></li>
                                                    </ul>
                                                </li>
                                                <li><a href="#" class="sub-sub-link" data-filter="puzzle-sudoku">Sudoku</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#" class="sub-sub-link" data-filter="activity-wordsearch">Word Search</a></li>
                                        <li><a href="#" class="sub-sub-link" data-filter="activity-coloring">Coloring Pages</a></li>
                                    </ul>
                                </li>
                                <li><a href="#" class="subcategory-link" data-filter="format-teacher">Teacher’s Guides</a></li>
                            </ul>
                        </div>
                        <div class="category-item" data-category="age">
                            <div class="category-header">By Age Group</div>
                            <ul class="subcategories">
                                <li><a href="#" class="subcategory-link" data-filter="age-5-8">5–8 years</a></li>
                                <li><a href="#" class="subcategory-link" data-filter="age-9-12">9–12 years</a></li>
                                <li><a href="#" class="subcategory-link" data-filter="age-13+">13+ years</a></li>
                            </ul>
                        </div>
                    </aside>

                    <!-- Colonna destra -->
                    <div class="books-content">
                        <div class="books-banner">
                            <img src="assets/img/books-banner.jpg" alt="Puck&Co. Books Collection">
                        </div>
                        <div class="books-slider">
                            <h2 class="slider-title">New Releases</h2>
                            <div class="books-grid" id="slider-books"></div>
                        </div>
                        <div class="books-grid-section">
                            <h2 class="slider-title">All Books</h2>
                            <div class="books-grid" id="main-books"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modale Dettaglio Libro -->
    <div class="book-detail-modal" id="bookDetailModal">
        <div class="modal-content">
            <span class="close-modal" id="closeBookModal">&times;</span>
            <div class="modal-body">
        <div class="modal-image-section">
          <div class="main-image-wrapper" style="position: relative; display: flex; flex-direction: column; align-items: center;">
            <img src="" alt="" class="main-image" id="modalMainImage">
            <button class="gallery-nav prev" id="prevImage" style="display: none;">‹</button>
            <button class="gallery-nav next" id="nextImage" style="display: none;">›</button>
            <div class="image-counter" id="imageCounter" style="display: none;">1 / 1</div>
          </div>
          <div class="thumbnails" id="modalThumbnails"></div>
        </div>
                <div class="modal-info-section">
                    <h2 class="modal-title" id="modalTitle"></h2>
                    <p class="modal-description" id="modalDescription"></p>
                    <div class="modal-meta">
                        <h4>Dimensions</h4>
                        <p id="modalDimensions"></p>
                    </div>
                    <a href="#" class="modal-amazon-btn" id="modalAmazonBtn" target="_blank">View on Amazon</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer-wrapper">
        <footer>
            <div class="container">
                <div class="footer-grid">
                    <div class="footer-left"></div>
                    <div class="footer-center">
                        <div class="footer-logo">
                            <img src="assets/img/puck&co_logo.png" class="responsive-img" alt="Puck&Co." />
                        </div>
                        <p class="footer-text">© 2024 Puck&Co. All rights reserved.</p>
                        <p class="footer-text">Stories that shape champions on and off the ice</p>
                    </div>
                    <div class="footer-right"></div>
                </div>
            </div>
        </footer>
        <div class="privacy-container">
            <span id="privacy-link" class="footer-privacy-link" role="button" tabindex="0">Policy Privacy</span>
        </div>
    </div>

    <div class="modal" id="privacyModal" style="display:none;">
        <div class="modal-content" style="max-width:700px;">
            <span class="close-modal" id="closePrivacyModal">&times;</span>
            <div id="privacyContent" style="max-height:60vh; overflow-y:auto;"></div>
        </div>
    </div>

    <script>
        // Dati libri con descrizioni, dimensioni e galleria immagini
        const books = [
            { 
                id: "book1", 
                title: "Hockey Heroes Vol.1", 
                cover: "assets/img/books/en/book1.jpg",
                gallery: [
                    "assets/img/books/en/book1.jpg",
                    "assets/img/books/en/book3.jpg",
                    "assets/img/books/en/book4.jpg",
                    "assets/img/books/en/book5.jpg"
                ],
                amazon: "https://amazon.com/book1", 
                format: "illustrated", 
                age: "5-8",
                description: "Join young hockey players as they learn teamwork and fair play through exciting adventures on the ice.Join young hockey players as they learn teamwork and fair play through exciting adventures on the ice.",
                dimensions: "8.5 x 11 inches • 48 pages • Full color"
            },
            { 
                id: "book2", 
                title: "Champions of the Ice", 
                cover: "assets/img/books/en/book2.jpg",
                gallery: [
                    "assets/img/books/en/book3.jpg",
                    "assets/img/books/en/book4.jpg",
                    "assets/img/books/en/book5.jpg",
                    "assets/img/books/en/book6.jpg"
                ],
                amazon: "https://amazon.com/book2", 
                format: "illustrated", 
                age: "9-12",
                description: "A thrilling story about perseverance, leadership, and the true spirit of competition in youth hockey.",
                dimensions: "8.5 x 11 inches • 64 pages • Full color"
            },
            { 
                id: "book3", 
                title: "Legacy of the Rink", 
                cover: "assets/img/books/book3.jpg",
                gallery: [
                    "assets/img/books/book3.jpg",
                    "assets/img/books/book3-spread1.jpg",
                    "assets/img/books/book3-spread2.jpg",
                    "assets/img/books/book3-spine.jpg"
                ],
                amazon: "https://amazon.com/book3", 
                format: "illustrated", 
                age: "13+",
                description: "Explore the deeper values of hockey through the journey of a team facing real-world challenges.",
                dimensions: "8.5 x 11 inches • 80 pages • Full color"
            },
            { 
                id: "book4", 
                title: "Easy Hockey Crosswords", 
                cover: "assets/img/books/book4.jpg",
                gallery: [
                    "assets/img/books/book4.jpg",
                    "assets/img/books/book4-sample1.jpg",
                    "assets/img/books/book4-sample2.jpg"
                ],
                amazon: "https://amazon.com/book4", 
                format: "activity", 
                activityType: "crosswords-easy", 
                age: "9-12",
                description: "Fun and educational crossword puzzles themed around hockey rules, teams, and history.",
                dimensions: "8.5 x 11 inches • 32 pages • Black & white"
            },
            { 
                id: "book5", 
                title: "Advanced Hockey Crosswords", 
                cover: "assets/img/books/book5.jpg",
                gallery: [
                    "assets/img/books/book5.jpg",
                    "assets/img/books/book5-sample1.jpg",
                    "assets/img/books/book5-sample2.jpg"
                ],
                amazon: "https://amazon.com/book5", 
                format: "activity", 
                activityType: "crosswords-advanced", 
                age: "13+",
                description: "Challenging crosswords for serious hockey fans and trivia enthusiasts.",
                dimensions: "8.5 x 11 inches • 32 pages • Black & white"
            },
            { 
                id: "book6", 
                title: "Hockey Sudoku Challenge", 
                cover: "assets/img/books/book6.jpg",
                gallery: [
                    "assets/img/books/book6.jpg",
                    "assets/img/books/book6-puzzle1.jpg",
                    "assets/img/books/book6-puzzle2.jpg"
                ],
                amazon: "https://amazon.com/book6", 
                format: "activity", 
                activityType: "puzzle-sudoku", 
                age: "9-12",
                description: "Sudoku puzzles with a hockey twist — perfect for developing logic skills.",
                dimensions: "8.5 x 11 inches • 32 pages • Black & white"
            },
            { 
                id: "book7", 
                title: "Hockey Word Search", 
                cover: "assets/img/books/book7.jpg",
                gallery: [
                    "assets/img/books/book7.jpg",
                    "assets/img/books/book7-page1.jpg",
                    "assets/img/books/book7-page2.jpg"
                ],
                amazon: "https://amazon.com/book7", 
                format: "activity", 
                activityType: "activity-wordsearch", 
                age: "5-8",
                description: "Simple word searches featuring hockey terms and equipment for young learners.",
                dimensions: "8.5 x 11 inches • 24 pages • Black & white"
            },
            { 
                id: "book8", 
                title: "Pro Hockey Word Search", 
                cover: "assets/img/books/book8.jpg",
                gallery: [
                    "assets/img/books/book8.jpg",
                    "assets/img/books/book8-advanced1.jpg",
                    "assets/img/books/book8-advanced2.jpg"
                ],
                amazon: "https://amazon.com/book8", 
                format: "activity", 
                activityType: "activity-wordsearch", 
                age: "9-12",
                description: "Advanced word searches with NHL teams, players, and historical facts.",
                dimensions: "8.5 x 11 inches • 24 pages • Black & white"
            },
            { 
                id: "book9", 
                title: "Hockey Coloring Fun", 
                cover: "assets/img/books/book9.jpg",
                gallery: [
                    "assets/img/books/book9.jpg",
                    "assets/img/books/book9-coloring1.jpg",
                    "assets/img/books/book9-coloring2.jpg",
                    "assets/img/books/book9-coloring3.jpg"
                ],
                amazon: "https://amazon.com/book9", 
                format: "activity", 
                activityType: "activity-coloring", 
                age: "5-8",
                description: "Creative coloring pages featuring hockey scenes, players, and equipment.",
                dimensions: "8.5 x 11 inches • 40 pages • Black & white"
            },
            { 
                id: "book10", 
                title: "Teacher's Guide: Hockey Values", 
                cover: "assets/img/books/book10.jpg",
                gallery: [
                    "assets/img/books/book10.jpg",
                    "assets/img/books/book10-lesson1.jpg",
                    "assets/img/books/book10-lesson2.jpg"
                ],
                amazon: "https://amazon.com/book10", 
                format: "teacher", 
                age: "all",
                description: "Lesson plans and discussion guides to teach sportsmanship and teamwork through hockey.",
                dimensions: "8.5 x 11 inches • 56 pages • Black & white"
            },
            { 
                id: "book11", 
                title: "Classroom Activities: Ice Hockey", 
                cover: "assets/img/books/book11.jpg",
                gallery: [
                    "assets/img/books/book11.jpg",
                    "assets/img/books/book11-worksheet1.jpg",
                    "assets/img/books/book11-worksheet2.jpg"
                ],
                amazon: "https://amazon.com/book11", 
                format: "teacher", 
                age: "all",
                description: "Printable worksheets and group activities for educators.",
                dimensions: "8.5 x 11 inches • 48 pages • Black & white"
            },
            { 
                id: "book12", 
                title: "Team Spirit Workbook", 
                cover: "assets/img/books/book12.jpg",
                gallery: [
                    "assets/img/books/book12.jpg",
                    "assets/img/books/book12-activity1.jpg",
                    "assets/img/books/book12-activity2.jpg",
                    "assets/img/books/book12-activity3.jpg"
                ],
                amazon: "https://amazon.com/book12", 
                format: "activity", 
                activityType: "activity-coloring", 
                age: "9-12",
                description: "Interactive workbook combining coloring, puzzles, and reflection exercises.",
                dimensions: "8.5 x 11 inches • 52 pages • Black & white"
            }
        ];

        function renderBooks(container, bookList) {
            container.innerHTML = '';
            bookList.forEach(book => {
                const card = document.createElement('div');
                card.className = 'book-card';
                card.innerHTML = `
                    <img src="${book.cover}" alt="${book.title}">
                    <h4>${book.title}</h4>
                    <p class="book-description">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua...</p>
                    <button class="btn btn-secondary detail-btn" data-id="${book.id}">Detail</button>
                `;
                container.appendChild(card);
            });

            // Aggiungi event listener ai pulsanti Detail
            document.querySelectorAll('.detail-btn').forEach(btn => {
                btn.addEventListener('click', () => openBookDetail(btn.dataset.id));
            });
        }

        let currentImageIndex = 0;
        let currentGallery = [];

        function openBookDetail(bookId) {
            const book = books.find(b => b.id === bookId);
            if (!book) return;

            // Setup galleria
            currentGallery = book.gallery || [book.cover];
            currentImageIndex = 0;

            // Popola il modale
            updateMainImage();
            document.getElementById('modalTitle').textContent = book.title;
            document.getElementById('modalDescription').textContent = book.description;
            document.getElementById('modalDimensions').textContent = book.dimensions;
            document.getElementById('modalAmazonBtn').href = book.amazon;

            // Crea galleria di miniature
            createThumbnails(book);

            // Mostra/nascondi controlli navigazione
            const showNavigation = currentGallery.length > 1;
            document.getElementById('prevImage').style.display = showNavigation ? 'flex' : 'none';
            document.getElementById('nextImage').style.display = showNavigation ? 'flex' : 'none';
            document.getElementById('imageCounter').style.display = showNavigation ? 'block' : 'none';

            // Mostra modale
            document.getElementById('bookDetailModal').style.display = 'block';
        }

        function updateMainImage() {
      const mainImage = document.getElementById('modalMainImage');
      const counter = document.getElementById('imageCounter');
      mainImage.src = currentGallery[currentImageIndex];
      mainImage.alt = `Immagine ${currentImageIndex + 1}`;
      counter.textContent = `${currentImageIndex + 1} / ${currentGallery.length}`;
      // Aggiorna miniature attive
      document.querySelectorAll('.thumbnail').forEach((thumb, index) => {
        thumb.classList.toggle('active', index === currentImageIndex);
      });
        }

        function createThumbnails(book) {
            const thumbnailsContainer = document.getElementById('modalThumbnails');
            thumbnailsContainer.innerHTML = '';
            
            currentGallery.forEach((imageSrc, index) => {
                const thumbnail = document.createElement('img');
                thumbnail.src = imageSrc;
                thumbnail.className = `thumbnail ${index === 0 ? 'active' : ''}`;
                thumbnail.dataset.index = index;
                thumbnail.alt = `${book.title} - Image ${index + 1}`;
                
                thumbnail.addEventListener('click', () => {
                    currentImageIndex = parseInt(thumbnail.dataset.index);
                    updateMainImage();
                });
                
                thumbnailsContainer.appendChild(thumbnail);
            });
        }

        function navigateGallery(direction) {
            if (direction === 'next') {
                currentImageIndex = (currentImageIndex + 1) % currentGallery.length;
            } else {
                currentImageIndex = (currentImageIndex - 1 + currentGallery.length) % currentGallery.length;
            }
            updateMainImage();
        }

        function showFeaturedBook() {
            const randomBook = books[Math.floor(Math.random() * books.length)];
            document.querySelector('.featured-cover').src = randomBook.cover;
            document.querySelector('.featured-title').textContent = randomBook.title;
            document.querySelector('.featured-detail-btn').setAttribute('data-id', randomBook.id);
        }

        function closeSiblings(element, selector) {
            const siblings = element.parentElement.querySelectorAll(selector);
            siblings.forEach(sibling => {
                if (sibling !== element) {
                    if (sibling.classList.contains('open')) {
                        sibling.classList.remove('open');
                    }
                    const subSub = sibling.querySelector('.sub-subcategories');
                    if (subSub) subSub.classList.remove('open');
                    const subSubSub = sibling.querySelector('.sub-sub-subcategories');
                    if (subSubSub) subSubSub.classList.remove('open');
                    const subSubSubSub = sibling.querySelector('.sub-sub-sub-subcategories');
                    if (subSubSubSub) subSubSubSub.classList.remove('open');
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            showFeaturedBook();
            renderBooks(document.getElementById('main-books'), books);
            renderBooks(document.getElementById('slider-books'), books.slice(0, 4));
            
            // Pulsante Detail per featured book
            document.querySelector('.featured-detail-btn').addEventListener('click', function() {
        const bookId = this.getAttribute('data-id');
        if (bookId) openBookDetail(bookId);
    });
            
            // Gestione categorie
            document.querySelectorAll('.category-header').forEach(header => {
                header.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const categoryItem = header.closest('.category-item');
                    const isOpen = categoryItem.classList.contains('open');
                    closeSiblings(categoryItem, '.category-item');
                    categoryItem.classList.toggle('open', !isOpen);
                });
            });

            document.querySelectorAll('.subcategory-header').forEach(header => {
                header.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const subcategoryItem = header.closest('li');
                    const subSub = subcategoryItem.querySelector('.sub-subcategories');
                    const isOpen = subSub && subSub.classList.contains('open');
                    closeSiblings(subcategoryItem, 'li');
                    if (subSub) {
                        subSub.classList.toggle('open', !isOpen);
                        header.querySelector('.submenu-toggle').style.transform = !isOpen ? 'rotate(90deg)' : 'rotate(0deg)';
                    }
                });
            });
            
            document.querySelectorAll('.sub-sub-header').forEach(header => {
                header.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const subSubItem = header.closest('li');
                    const subSubSub = subSubItem.querySelector('.sub-sub-subcategories');
                    const isOpen = subSubSub && subSubSub.classList.contains('open');
                    closeSiblings(subSubItem, 'li');
                    if (subSubSub) {
                        subSubSub.classList.toggle('open', !isOpen);
                        header.querySelector('.submenu-toggle').style.transform = !isOpen ? 'rotate(90deg)' : 'rotate(0deg)';
                    }
                });
            });

            document.querySelectorAll('.sub-sub-subcategories .sub-sub-header').forEach(header => {
                header.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const subSubSubItem = header.closest('li');
                    const subSubSubSub = subSubSubItem.querySelector('.sub-sub-sub-subcategories');
                    const wasOpen = subSubSubSub && subSubSubSub.classList.contains('open');
                    closeSiblings(subSubSubItem, 'li');
                    if (subSubSubSub) {
                        subSubSubSub.classList.toggle('open', !wasOpen);
                        header.querySelector('.submenu-toggle').style.transform = !wasOpen ? 'rotate(90deg)' : 'rotate(0deg)';
                    }
                });
            });

            document.querySelectorAll('.subcategory-link, .sub-sub-link, .sub-sub-sub-link').forEach(link => {
                link.addEventListener('click', e => {
                    e.preventDefault();
                    document.querySelectorAll('[class*="link"]').forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                });
            });
        });

        // Event listeners per navigazione galleria
        document.getElementById('prevImage').addEventListener('click', () => navigateGallery('prev'));
        document.getElementById('nextImage').addEventListener('click', () => navigateGallery('next'));

        // Navigazione da tastiera
        document.addEventListener('keydown', (e) => {
            const modal = document.getElementById('bookDetailModal');
            if (modal.style.display === 'block') {
                if (e.key === 'ArrowLeft') {
                    e.preventDefault();
                    navigateGallery('prev');
                } else if (e.key === 'ArrowRight') {
                    e.preventDefault();
                    navigateGallery('next');
                } else if (e.key === 'Escape') {
                    e.preventDefault();
                    modal.style.display = 'none';
                }
            }
        });

        // Chiusura modale libro
        document.getElementById('closeBookModal').addEventListener('click', () => {
            document.getElementById('bookDetailModal').style.display = 'none';
        });

        window.addEventListener('click', (e) => {
            if (e.target === document.getElementById('bookDetailModal')) {
                document.getElementById('bookDetailModal').style.display = 'none';
            }
        });

        // Script per il link "Policy Privacy"
        document.getElementById('privacy-link').addEventListener('click', function() {
            const privacyModal = document.getElementById('privacyModal');
            privacyModal.style.display = 'block';
        });

        document.getElementById('closePrivacyModal').addEventListener('click', function() {
            const privacyModal = document.getElementById('privacyModal');
            privacyModal.style.display = 'none';
        });

        window.addEventListener('click', function(event) {
            const privacyModal = document.getElementById('privacyModal');
            if (event.target === privacyModal) {
                privacyModal.style.display = 'none';
            }
        });
    </script>
</body>
</html>